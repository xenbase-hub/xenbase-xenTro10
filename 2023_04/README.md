# Gene IDs symbols assignment (and protein IDs too), 2023_04

## Procedures

* Download a HGNC complete file.
  * Script: 01.download-raw-files.sh (it also downloads NCBI gene orthology table)
  * Output: raw/hgnc_complete_set.2023_04.txt.gz

* Prepare the table for the UniProt-NCBI_RefSeq gene-protein ID mapping.
  * See proteome/ directory for more information. 
  * Output: XENTR_xenTro10.prot_uniprot_ncbi.raw.2023_04.csv

* Prepare the DIOPT analysis (from Saoirse Foley, 2023_04_28).
  * All files are available at ./DIOPT.Foley2023_04_28
  * For this version, I only used the summary table (DIOPT.Foley2023_04_28/DIOPT2023_04.Hsap_Xtrop_7Tools.tsv.gz)

* Prepare the Xenbase gene ID - gene symbol mapping file (from Brad Arshinoff, 2023_04_26). 
  * Output: XENTR_xenTro10.XB_export.Arshinoff-2023_04_26.csv

* Make a 'raw' gene symbol table. 
  * Script: 02.make-gene_symbols_raw.py
  * Starting with UniProt-NCBI_RefSeq table. 
  * Append the Xenbase table with NCBI Gene ID (a.k.a. Entrez Gene ID). 
  * Append the DIOPT human best orthologous gene (NCBI Gene ID), with up-to-date HGNC symbol (use the NCBI_GeneID-HGNC_symbol from the HGNC file. 
  * Output: XENTR_xenTro10.gene_symbols_raw.XB2023_04.csv

* Apply the gene symbol correction/assignment from the Xenbase curation team.
  * Script: 03.apply-gene_symbols_reviewed.py
  * Input: XENTR_xenTro10.gene_symbols_raw.XB2023_04.csv
    * Generated by 02.make-gene_symbols_raw.py in prevous step. 
  * Curation information (prepared manually): XENTR_xenTro10.gene_symbols_from_reviewers.XB2023_04.csv
  * Output: XENTR_xenTro10.gene_symbols_reviewed.XB2023_04.csv

* Validate the gene symbols.
  * Script: 04.validate-gene_symbols_raw.py
  * Input: XENTR_xenTro10.gene_symbols_reviewed.XB2023_04.csv
  * Check the one-to-one relationship betweeh geneID and gene_symbol. 
  * If a gene_symbol is used multiple times, revert it into the NCBI gene symbol (confirmed one-to-one relationship). 
  * Ic a gene_ID has multiple gene symbols, report it for manual correction.
    * Records with 'conflict' note in the curation information (XENTR_xenTro10.gene_symbols_from_reviewers.XB2023_04.csv).
  * Output: XENTR_xenTro10.gene_symbols_reviewed.XB2023_04.csv

* Final validation.
  * Script: 05.validate-gene_symbols_final.py
  * Just verify the recursive validation step by 04.validate-gene_symbols_raw.py

## Files
### Scripts for the main procedure.
* 01.download-raw-files.sh
* 02.make-gene_symbols_raw.py
* 03.apply-gene_symbols_reviewed.py
* 04.validate-gene_symbols_raw.py
* 05.validate-gene_symbols_final.py

## Sources
* DIOPT.Foley2023_04_28
* raw (not committed)
* XENTR_xenTro10.XB_export.Arshinoff-2023_04_26.csv (from Xenbase)
* XENTR_xenTro10.prot_uniprot_ncbi.raw.2023_04.csv
* XENTR_xenTro10.gene_symbols_from_reviewers.XB2023_04.csv

## Intermediate files
1. XENTR_xenTro10.gene_symbols_raw.XB2023_04.csv
2. XENTR_xenTro10.gene_symbols_reviewed.XB2023_04.csv

## Final gene info table
* XENTR_xenTro10.gene_symbols.XB2023_04.csv


## Scripts for the report
* count-gene_id-and-symbol.sh : count total number of records(proteins) & genes. 
  * FILE: XENTR_xenTro10.gene_symbols.XB2023_04.csv
  * Number of records:  37416
  * Number of gene ID:  21543
  * Number of gene symbols:  21543

* check-HGNC_symbols.py : check the number of symbols matched to current HGNC data.
  * XENTR_xenTro10.gene_symbols_vs_HGNC.XB2023_04.csv (remark,NCBI GeneID,XENTR symbol,HGNC symbol)
    * MATCH (14,088 genes): XENTR gene symbol is matched to HGNC gene symbol.
    * NO_MATCH (6,648 genes): XENTR gene symbol is not available in the HGNC. 
    * STRIP_MATCH (440 genes): XENTR gene symbol is matched to the HGNC after stripping (i.e. smad4.1 vs. SMAD4).
    * ALIAS_MATCH (343 genes): XENTR gene symbol is matched to the HGNC, but it is in the alias record. 
    * STRIP_ALIAS_MATCH (24 genes): XENTR gene symbol is matched to the HGNC after stripping, but it is in the alias record. 


